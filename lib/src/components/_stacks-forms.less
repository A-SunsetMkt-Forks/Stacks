//
//  STACK OVERFLOW
//  FORMS

//  This CSS comes from Stacks, our CSS & Pattern library for rapidly building
//  Stack Overflow. https://stackoverflow.design/
//
//  For documentation of all these classes and how to contribute,
//  https://gh.stackoverflow.com/pages/Design/Stacks/
//
//  TABLE OF CONTENTS
//  • UNIVERSAL PROPERTIES
//    - Layout
//    - Font Styles
//  • Inputs
//    - Base Style
//    - Interaction States
//    - Textareas
//    - Select Menus
//    - File Upload
//    - Checkboxes & Radios
//  • LABELS
//    - Base Style
//    - Style Modifications
//    - Status Flag
//  • TYPE STYLES
//  • LABELS
//
//  ============================================================================
//  $  INPUTS
//  ============================================================================
//  $$  BASE STYLE
//  ----------------------------------------------------------------------------
.s-input {
    padding: 0.8em 1em;
    width: 100%;
    margin: 0;
    border: 1px solid @black-200;
    border-radius: @br-sm;
    background-color: @white;
    -webkit-box-shadow: inset 0 0 1px fade(@black-350, 20%), 0 0 0 fade(@white, 0%);
            box-shadow: inset 0 0 1px fade(@black-350, 20%), 0 0 0 fade(@white, 0%);
    font-family: @ff-sans;
    font-size: inherit;
    line-height: 1;

    //  --  PLACEHOLDER
    //  ------------------------------------------------------------------------
    &::-webkit-input-placeholder {
        color: @black-200;
    }
    &:-ms-input-placeholder { // IE
        color: @black-200;
    }
    &::-ms-input-placeholder { // Edge
        color: @black-200;
    }
    &::placeholder {
        color: @black-200;
        padding-top: 1px; // Placeholder text is 1px higher than text that's entered.
    }
}

.s-input-icon {
    position: absolute;
    top: 50%;
    right: @su8;
    margin-top: -9px;
    pointer-events: none;
    vertical-align: text-bottom !important;
}

//  $$  MESSAGE
//      Set some baseline styles
//  ----------------------------------------------------------------------------
.s-input-message {
    margin: @su4 0 0;
    .mx-fs(@fs-caption);
}


//  $$  STATES
//      The many states for inputs and select menus.
//  ----------------------------------------------------------------------------
.s-input,
.s-select > select {
    //  Focus
    &:focus {
        position: relative;
        outline: 0;
        border-color: @blue-300;
        -webkit-box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@blue-500, 15%);
                box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@blue-500, 15%);
    }

    //  Disabled, Read-only
    &[disabled],
    &[read-only] {
        border-color: @black-075;
        -webkit-box-shadow: inset 0 0 2px fade(@black-350, 10%);
                box-shadow: inset 0 0 2px fade(@black-350, 10%);
        background-color: @bgc-lightest;
        color: @black-200;
    }

    //  Disabled
    &[disabled] {
        cursor: not-allowed;
    }
}

//  --  FORM VALIDATION STATES
//      Validation states will need applied at the wrapping container level.
//  ----------------------------------------------------------------------------
//  --  WARNING
.has-warning {
    .s-input,
    .s-checkbox,
    &.s-select > select {
        border-color: @yellow-600;

        &:focus {
            -webkit-box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@yellow-500, 40%);
                    box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@yellow-500, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: shade(@yellow-600, 20%);
    }

    .s-input-icon {
        color: @yellow-600;
    }
}

//  --  ERROR
.has-error {
    .s-input,
    .s-checkbox,
    &.s-select > select {
        border-color: @red-400;

        &:focus {
            -webkit-box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@red-200, 40%);
                    box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@red-200, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: @red-500;
    }

    .s-input-icon {
        color: @red-400;
    }
}

//  --  SUCCESS
.is-success {
    .s-input,
    .s-checkbox,
    &.s-select select {
        border-color: @green-400;

        &:focus {
            -webkit-box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@green-200, 40%);
                    box-shadow: inset 0 0 4px @black-050, 0 0 0 @su4 fade(@green-200, 40%);
        }
    }

    .s-input-message,
    .s-input-description {
        color: darken(@green-500, 2%);
    }

    .s-input-icon {
        color: @green-400;
    }
}

//  --  DISABLED
.is-disabled {
    &.s-select:before,
    &.s-select:after {
        border-color: @black-200 transparent;
    }

    .svg-icon {
        color: @black-200;
    }
}

.is-disabled,
.is-success,
.has-error,
.has-warning {
    position: relative;

    .s-input {
        padding-right: @su32;
    }

    &.s-select .s-input-icon {
        right: @su32;
    }
}

//  $$  SELECT MENUS
//  ----------------------------------------------------------------------------
.s-select {
    position: relative;

    //  --  MENU ARROWS
    //      To customize the visual appearance of the select menu arrows, we
    //      need to recreate them on the wrapping .select div.
    //  ------------------------------------------------------------------------
    &:before,
    &:after {
        content: "";
        position: absolute;
        right: 13px;
        pointer-events: none;
        border-width: 4px;
        border-style: solid;
        border-color: @black-700 transparent;
        z-index: @zi-pop;
    }
    &:before {
        top: calc(~"50% - 5px");
        border-top-width: 0;
        border-bottom-width: 4px;
    }
    &:after {
        top: calc(~"50% + 1px");
        border-top-width: 4px;
        border-bottom-width: 0;
    }

    //  --  MENU
    //      Now we can style the visual appearance of the select menu;
    //  ------------------------------------------------------------------------
    > select {
        //  [1] Reset the appearance
        .appearance(none);

        //  [2] Update the styles
        padding: 0.8em 1em;
        padding-right: @su32;
        width: 100%;
        height: 100%; // Fill the height of its parent
        outline: 0;
        border-radius: @br-sm;
        border: 1px solid @black-200;
        background-color: @white;
        font-family: @ff-sans;
        font-size: inherit;
        line-height: 1;
    }
}

//  $$  CHECKBOXES & RADIOS
//  ----------------------------------------------------------------------------
.s-checkbox,
.s-radio {
    //  [1]   Check to see if we can use custom styles, if so reset the defaults
    //  ------------------------------------------------------------------------
    @supports ((-webkit-appearance: none) or (-moz-appearance: none) or (appearance: none)) or (-webkit-appearance: none) {
    .appearance(none);

    &::-ms-check {
        display: none;
    }

    //  [2]  Now re-style the checkboxes and radios
    //  ------------------------------------------------------------------------
    width: 1em;
    height: 1em;
    border: 1px solid @black-200;
    background-color: @white;
    outline: 0;
    font-size: inherit;
    cursor: pointer;
    vertical-align: middle;

    &:focus {
        outline: 0;
    }
  }
}

//  --   Checkboxes
//  ----------------------------------------------------------------------------
.s-checkbox {
    @supports ((-webkit-appearance: none) or (-moz-appearance: none) or (appearance: none)) or (-webkit-appearance: none) {
        border-radius: @br-sm;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: contain;

        &:checked {
            border-color: @blue-500;
            background-color: @blue-500;
            background-image: url("data:image/svg+xml,%3Csvg width='11' height='11' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 3.41L8.59 2 4 6.59 2.41 5 1 6.41l3 3z' fill='%23fff'/%3E%3C/svg%3E");

            &:focus {
                border-color: @blue-500;
            }
        }

        &:focus {
            border-color: @blue-300;
            -webkit-box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
                    box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
        }
    }
}

//  --   Radio Selects
//  ----------------------------------------------------------------------------
.s-radio {
    @supports ((-webkit-appearance: none) or (-moz-appearance: none) or (appearance: none)) or (-webkit-appearance: none) {
        border-radius: @br-circle;

        &:checked {
            border-color: @blue-500;
            border-width: 0.30769231em;
            background-color: @white;
        }

        &:focus {
            -webkit-box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
                    box-shadow: 0 0 0 @su4 fade(@blue-500, 15%);
        }
    }
}


//  ============================================================================
//  $  LABELS
//  ============================================================================
.s-label {
    .mx-fs(@fs-body2);
    font-weight: 700;
    cursor: pointer;
}

//  $$  LABEL STATUS FLAG
//  ----------------------------------------------------------------------------
//      Is this form item required or optional? Flag the status for users.
//      Default styling is optional.
.s-label--status {
    padding: @su2 @su8;
    font-size: @fs-caption;
    font-style: italic;
    font-weight: 400;
    vertical-align: text-bottom;
    background-color: @black-050;
    border-radius: @br-sm;

    &.s-label--status__required {
        color: @white;
        font-style: normal;
        background-color: @red-500;
    }
}

//  ============================================================================
//  $  TEXT STYLES
//  ============================================================================
.s-input-description {
    margin: 0 0 @su8;
    .mx-fs(@fs-caption);
    line-height: @lh-s;
    color: @fc-medium;
}

//  ============================================================================
//  $ OPTION TOGGLE
//  ----------------------------------------------------------------------------
.s-option-toggle {
    //  First hide the radio buttons
    .s-radio {
        position: absolute;
        left: -999em;
        opacity: 0;
    }

    //  Next modifications to option cells
    .s-option-toggle--option {
        &:not(:first-child) {
            margin-left: -1px;
        }

        //  Round the corners on the first and last elements
        &:first-of-type .s-label {
            .blr-sm;
        }

        &:last-of-type .s-label {
            .brr-sm;
        }
    }

    //  Style the base label
    .s-label {
        padding: 0.8em 1em;
        width: 100%;
        margin: 0;
        border: 1px solid @black-150;
        background-color: @white;
        font-family: inherit;
        font-size: inherit;
        font-weight: 400;
        line-height: 1;
        cursor: pointer;
        text-align: center;

        -webkit-touch-callout: none; // iOS Safari
          -webkit-user-select: none; // Safari // Konqueror HTML
             -moz-user-select: none; // Firefox
              -ms-user-select: none; // Internet Explorer/Edge
                  user-select: none; // Non-prefixed version

        &:hover {
            background-color: fade(saturate(@black-200,5%),5%);
        }
    }

    //  If the label is selected, style it accordingly.
    .s-radio:checked + .s-label {
        background-color: @black-100;
        -webkit-box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@black-025,30%),60%);
                box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@black-025,30%),60%);
        color: @black-700;
        z-index: @zi-pop;
    }

    //  $$  MODIFICATIONS
    //  --------------------------------------------------------------------------
    //  --  Primary
    //      When the toggle is the only one within a view and we want it to be
    //      visually dominating for the user.
    &.s-option-toggle__primary {
        .s-label:hover {
            color: @blue-700;
            background-color: @blue-050;
        }

        .s-radio:checked + .s-label {
            border-color: @blue-600;
            -webkit-box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@blue-300,30%),90%);
                    box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@blue-300,30%),90%);
            background-color: @blue-500;
            color: @white;
        }
    }

    //  --  Switch
    //      Used when the toggle represents an "on/off" choice for the user.
    &.s-option-toggle__switch {
        .s-radio:checked + .s-label {
            &:not(.s-label__off) {
                border-color: @green-400;
                background-color: @green-400;
                -webkit-box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@green-200,30%),90%);
                        box-shadow: inset 0 @su2 @su2+@su4 0 fade(darken(@green-200,30%),90%);
                color: @white;
            }
        }
    }
}

//  $$  CONNECTED INPUTS
//      To visually connect inputs together
//  ----------------------------------------------------------------------------
.s-input-connect {
    padding: 0.8em 1em;
    line-height: 1;

    //  When we want the gray background
    &.s-input-connect__fill {
        border: 1px solid @black-150;
        border-left-width: 0;
        border-right-width: 0;
        background-color: @bgc-lightest;
        color: @fc-medium;

        &.order-first {
            border-left-width: 1px;
        }
        &.order-last {
            border-right-width: 1px;
        }
    }

    //  No wrapping on labels
    .s-label {
        white-space: nowrap;
    }
}
