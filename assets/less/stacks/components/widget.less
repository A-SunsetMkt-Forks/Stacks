.s-widget {
    @s-widget-content-padding: @su-16 - 1px; // subtract 1px for border
    @s-widget-content-inner-spacing: @su-12;
    @s-widget-content-outer-spacing: @su-16;

    @s-widget-outer-border-color: @black-100;
    @s-widget-header-border-color: @black-050;
    @s-widget-content-separator-color: @black-075;
    @s-widget-header-background-color: @black-025;

    @s-widget-outer-border-color-blue: @powder-200;
    @s-widget-header-border-color-blue: @powder-200;
    @s-widget-content-separator-color-blue: @powder-200;
    @s-widget-header-background-color-blue: darken(@powder,5%); // would be @powder-150 if that existed
    @s-widget-content-background-color-blue: @powder-100;

    @s-widget-outer-border-color-yellow: @yellow-300;
    @s-widget-header-border-color-yellow: @yellow-200;
    @s-widget-content-separator-color-yellow: @yellow-300;
    @s-widget-header-background-color-yellow: darken(@yellow,5%); // would be @yellow-150 if that existed
    @s-widget-content-background-color-yellow: @yellow-100;

    @s-widget-outer-border-color-green: @forest-300;
    @s-widget-header-border-color-green: @forest-200;
    @s-widget-content-separator-color-green: @forest-200;
    @s-widget-header-background-color-green: lighten(@forest,35%); // would be @forest-150 if that existed
    @s-widget-content-background-color-green: @forest-100;


    
    border: 1px solid @s-widget-outer-border-color;
    border-radius: @br-2;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    font-size: 13px; // TODO: 13px isn't in our size list
    
    a, a:visited {
        color: @black-500;
    }
    
    > .-header, .-content {
        display: block;
    }
    
    > .-header {
        font-size: 15px; // TODO: 15px isn't in our size list
        font-weight: normal;
        color: @black-500;
        padding: @su-12 @su-16;
        background: @s-widget-header-background-color;
        border-bottom: 1px solid @s-widget-header-border-color;
        
        &._alternate-small-bold {
            font-size: @fs-12;
            font-weight: bold;
        }
        
    }
    > .-content + .-header {
        // TODO: handle the collapsed case
        border-top: 1px solid @s-widget-header-border-color;
    }

    > .-header + .-content, .-content:first-child { // (1)
        margin-top: @s-widget-content-outer-spacing;
    }
    .-content:last-child {
        margin-bottom: @s-widget-content-outer-spacing;
    }    
    .-content + .-header {
        // This will collapse with the previous content element's bottom margin.
        // In particular this means this relies on the fact that the outer spacing
        // is larger than the inner spacing.
        margin-top: @s-widget-content-outer-spacing;
    }
    &._complex-items > .-content {
        border-top: 1px solid @s-widget-content-separator-color;
        padding-top: @s-widget-content-inner-spacing;
    }
    &._complex-items > .-content:first-child, &._complex-items > .-header + .-content,  {
        border-top: none;
        padding-top: 0;
    }
    
    > .-content {
        
        position: relative; //TODO comment (or move to parent?)
        
        & {
            margin-bottom: @s-widget-content-inner-spacing;
            // note that the first content element after a header (or if there's no header at all)
            // also needs a top margin; this is handled further above (see "(1)")
        }
        padding: 0 @s-widget-content-padding;
        
        &.is-current {
            &:before {
                content: '';
                position: absolute;
                height: ~"calc(100% +" @s-widget-content-inner-spacing ~")";
                left: 0;
                border-left: 3px solid @orange;
                margin-left: -1px; // the orange selection indicator overlaps with the widget border
                margin-top: -@s-widget-content-inner-spacing/2;
            }
            font-weight: bold;
        }
    }
    
    // COLOR ALTERNATIVES
    // todo: use CSS custom properties for this once we don't care about IE anymore
    &._alternate-blue {
        border-color: @s-widget-outer-border-color-blue;
        background-color: @s-widget-content-background-color-blue;
        &._complex-items > .-content {
            border-color: @s-widget-content-separator-color-blue;
        }
        > .-header, .-content + .-header {
            border-color: @s-widget-header-border-color-blue;
            background-color: @s-widget-header-background-color-blue;
        }
    }
    
    &._alternate-yellow {
        border-color: @s-widget-outer-border-color-yellow;
        background-color: @s-widget-content-background-color-yellow;
        &._complex-items > .-content {
            border-color: @s-widget-content-separator-color-yellow;
        }
        > .-header, .-content + .-header {
            border-color: @s-widget-header-border-color-yellow;
            background-color: @s-widget-header-background-color-yellow;
        }
    }    
    
    &._alternate-green {
        border-color: @s-widget-outer-border-color-green;
        background-color: @s-widget-content-background-color-green;
        &._complex-items > .-content {
            border-color: @s-widget-content-separator-color-green;
        }
        > .-header, .-content + .-header {
            border-color: @s-widget-header-border-color-green;
            background-color: @s-widget-header-background-color-green;
        }
    }        
    
    
    > :not(.-content):not(.-header) {
        .stacks-error('All children of a .s-widget must be .-content or .-header.');
    }
    
}